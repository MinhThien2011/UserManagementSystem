{% extends "layout.html" %}
{% block content %}
<div class="container">
    {% if current_user.is_authenticated %}
        <div class="row mb-4">
            <div class="col-md-12">
                <h2>Chào mừng, {{ current_user.name }}!</h2>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Quản lý tài khoản</h5>
                        <p class="card-text">Cập nhật thông tin cá nhân và mật khẩu của bạn.</p>
                        <a href="{{ url_for('main.profile') }}" class="btn btn-primary">Cập nhật hồ sơ</a>
                    </div>
                </div>
            </div>
            
            {% if current_user.role.role_name in ['Admin', 'Content Manager'] %}
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Quản lý người dùng</h5>
                        <p class="card-text">Xem và quản lý danh sách người dùng trong hệ thống.</p>
                        <a href="{{ url_for('main.users') }}" class="btn btn-primary">Quản lý người dùng</a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            {% if current_user.role.role_name == 'Admin' %}
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Quản lý quyền</h5>
                        <p class="card-text">Quản lý các quyền trong hệ thống.</p>
                        <a href="{{ url_for('main.admin_roles') }}" class="btn btn-primary">Quản lý quyền</a>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
        
        {% if current_user.role.role_name == 'Admin' %}
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Thống kê hệ thống</h5>
                        <div class="row mt-3">
                            <div class="col-md-4">
                                <div class="text-center">
                                    <h3>{{ stats.total_users }}</h3>
                                    <p>Tổng số người dùng</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center">
                                    <h3>{{ stats.new_users }}</h3>
                                    <p>Người dùng mới hôm nay</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center">
                                    <h3>{{ stats.admin_count }}</h3>
                                    <p>Số lượng Admin</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    {% else %}
        <div class="row">
            <div class="col-md-6 offset-md-3 text-center">
                <h2>Chào mừng đến với Hệ thống Quản lý Người dùng</h2>
                <p class="lead">Vui lòng đăng nhập hoặc đăng ký để tiếp tục.</p>
                <div class="mt-4">
                    <a href="{{ url_for('main.login') }}" class="btn btn-primary me-2">Đăng nhập</a>
                    <a href="{{ url_for('main.register') }}" class="btn btn-outline-primary">Đăng ký</a>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}